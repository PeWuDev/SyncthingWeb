@using System.Threading.Tasks
@model SyncthingWeb.Areas.Setup.Models.SetupViewModel

@{
    ViewBag.Title = "Setup";
    Layout = "~/Views/Shared/_SetupLayout.cshtml";

    var isHttps = Url.ActionContext.HttpContext.Request.IsHttps;
}
<div class="login-box-body">
    <p class="login-box-msg">Provide base info for your site</p>

    <form asp-action="Index" asp-controller="Home" method="post" asp-antiforgery="true">
        @if (!isHttps)
        {
            <div class="callout callout-danger">
                <h4>Unsecure protocol</h4>

                <p>
                    We have detected that your site is not running under <b>https</b>. It is highly recommended
                    to configure https connection to this site.
                </p>
            </div>
        }
        <div class="form-group has-feedback">
            <input asp-for="Email" placeholder="Email" class="form-control" type="text" />
            <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
            <span asp-validation-for="Email"></span>
        </div>
        <div class="form-group has-feedback">
            <input asp-for="Password" placeholder="Password" class="form-control" type="password" />
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
            <span asp-validation-for="Password"></span>
        </div>
        <div class="form-group has-feedback">
            <input asp-for="ConfirmPassword" placeholder="Confirm password" class="form-control" type="password" />
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
            <span asp-validation-for="ConfirmPassword"></span>
        </div>

        <div class="form-group has-feedback">
            <input asp-for="SyncthingEndpoint" placeholder="Syncthing endpoint address" class="form-control" type="text"/>
            <p>Example: http://localhost:8384</p>
        </div>
        
        <div class="form-group has-feedback">
            <input asp-for="SyncthingApiKey" placeholder="Syncthing API key" class="form-control" type="text" />
            <p>Open settings in Syncthing GUI in order to determine your current key or to generate a new one.</p>
        </div>

        <div class="form-group has-feedback">
            <label> <input type="checkbox" asp-for="EnableRegistration"/> Enable registration</label>
        </div>

        <div class="row">
            <div class="col-xs-8">
            </div>
            <!-- /.col -->
            <div class="col-xs-4">
                <button type="submit" class="btn btn-primary btn-block btn-flat">Save</button>
            </div>
            <!-- /.col -->
        </div>
    </form>

</div>